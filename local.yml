---
- hosts: localhost
  tags: always
  connection: local
  become: true
  pre_tasks:
    - name: pre-run update package cache
      tags: always
      pacman: update_cache=yes
      changed_when: false
      when: ansible_distribution == "Archlinux"

  tasks:
  - name: aurman user
    user:
      name: aurman
      group: wheel

  - name: aurman permisions
    template:
      src: aurman
      dest: /etc/sudoers.d/aurman
      validate: 'visudo -cf %s'

#  - name: install yay
#    become: yes
#    become_user: aurman
#    aur:
#      name: yay
#      use: makepkg
#      skip_installed: true

  - name: install apps
    package:
      name: '{{ packages }}'
      state: latest

  - name: change font size alacritty
    lineinfile:
      path: ~/.config/alacritty/alacritty.yml
      regexp: "  size: 12"
      line: "    size: 10"
      state: present
      backup: yes
